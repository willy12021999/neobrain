<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Quiz 3 : Travail et √©nergie</title>
  <style>
    body { font-family: sans-serif; background: #1e1f26; color: white; padding: 20px; }
    .quiz-container { background: #2f3541; padding: 30px; border-radius: 12px; max-width: 700px; margin: auto; }
    h1 { text-align: center; color: #facc15; }
    h3 { color: #7ea9f7; }
    label { display: block; margin: 5px 0; }
    button { background: #facc15; border: none; padding: 10px 20px; cursor: pointer; border-radius: 5px; }
    .bar-container { background: #444; border-radius: 10px; margin: 20px 0; }
    .bar { height: 24px; background: #facc15; border-radius: 10px; line-height: 24px; color: black; text-align: center; }
  </style>
</head>
<body>
  <h1>Quiz 3 : Travail et √©nergie</h1>
  <div class="quiz-container">
    <form id="quizForm">
      <div class="question">
        <h3>1. Le travail d'une force est √©gal √† :</h3>
        <label><input type="radio" name="q1" value="1"> Force √ó d√©placement √ó cos(Œ∏)</label>
        <label><input type="radio" name="q1" value="0"> Force √∑ d√©placement</label>
        <label><input type="radio" name="q1" value="0"> Force + d√©placement</label>
      </div>
      <div class="question">
        <h3>2. L'√©nergie cin√©tique d√©pend :</h3>
        <label><input type="radio" name="q2" value="0"> De la vitesse uniquement</label>
        <label><input type="radio" name="q2" value="1"> De la masse et du carr√© de la vitesse</label>
        <label><input type="radio" name="q2" value="0"> De la masse uniquement</label>
      </div>
      <div class="question">
        <h3>3. La loi de conservation de l'√©nergie affirme que :</h3>
        <label><input type="radio" name="q3" value="1"> L'√©nergie totale reste constante dans un syst√®me isol√©</label>
        <label><input type="radio" name="q3" value="0"> L'√©nergie peut √™tre cr√©√©e ou d√©truite</label>
        <label><input type="radio" name="q3" value="0"> L'√©nergie cin√©tique est toujours nulle</label>
      </div>
      <div class="question">
        <h3>4. L'√©nergie potentielle gravitationnelle d'un objet d√©pend :</h3>
        <label><input type="radio" name="q4" value="1"> De sa masse, de la hauteur, et de la gravit√©</label>
        <label><input type="radio" name="q4" value="0"> De sa vitesse uniquement</label>
        <label><input type="radio" name="q4" value="0"> De son volume uniquement</label>
      </div>
      <div style="text-align:center;"><button type="button" onclick="calculerScore()">Valider mes r√©ponses</button></div>
    </form>

    <div class="result" id="resultat"></div>
    <div class="feedback-section" id="feedback" style="display:none">
      <h2>Votre avis</h2>
      <button onclick="alert('Merci pour votre retour üëç')">üëç</button>
      <button onclick="alert('Merci pour votre retour üëé')">üëé</button>
    </div>

    <div class="history" id="historySection" style="display:none">
      <h3>Historique des tentatives</h3>
      <ul id="historyList"></ul>
      <p id="averageScore"></p>
    </div>
  </div>

  <script>
    let tentatives = 0;
    let historique = [];

    function calculerScore() {
      const form = document.getElementById('quizForm');
      const data = new FormData(form);
      let score = 0;
      for (let [_, value] of data.entries()) {
        score += parseInt(value);
      }

      const pourcentage = (score / 4) * 100;
      document.getElementById('resultat').innerHTML = `
        <h2>R√©sultat : ${score}/4</h2>
        <div class="bar-container">
          <div class="bar" style="width:${pourcentage}%">${Math.round(pourcentage)}%</div>
        </div>
      `;

      historique.push(score);
      tentatives++;
      afficherHistorique();

      if (score < 4 && tentatives >= 5) {
        afficherReponses();
        afficherChatbot();
      }

      document.getElementById('feedback').style.display = 'block';
    }

    function afficherHistorique() {
      const section = document.getElementById('historySection');
      const liste = document.getElementById('historyList');
      const moyenne = document.getElementById('averageScore');
      liste.innerHTML = "";
      historique.forEach((s, i) => {
        const item = document.createElement('li');
        item.textContent = `Tentative ${i + 1} : ${s}/4`;
        liste.appendChild(item);
      });
      const moy = historique.reduce((a, b) => a + b, 0) / historique.length;
      moyenne.innerHTML = `<strong>Moyenne :</strong> ${moy.toFixed(2)}/4`;
      section.style.display = 'block';
    }

    function afficherReponses() {
      alert("Voici les bonnes r√©ponses :\n1. Force √ó d√©placement √ó cos(Œ∏)\n2. Masse et carr√© de la vitesse\n3. L'√©nergie totale reste constante\n4. Masse, hauteur et gravit√©");
    }

    function afficherChatbot() {
      const script = document.createElement("script");
      script.src = "https://cdn.jotfor.ms/agent/embedjs/019744196c0c7522b9bf26ddbd747a790b7d/embed.js?skipWelcome=1&maximizable=1";
      document.body.appendChild(script);
    }
  </script>
</body>
</html>
